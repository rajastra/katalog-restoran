{"version":3,"file":"app~e4317507.bundle.js","mappings":"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","sources":["webpack://restaurant-apps/./src/scripts/routes/route.js","webpack://restaurant-apps/./src/scripts/routes/url-parser.js","webpack://restaurant-apps/./src/scripts/utils/Like-button-presenter.js","webpack://restaurant-apps/./src/scripts/utils/drawer-initiator.js","webpack://restaurant-apps/./src/scripts/utils/form-review.js","webpack://restaurant-apps/./src/scripts/utils/sw-register.js"],"sourcesContent":["import Home from \"../views/pages/home\";\r\nimport Detail from \"../views/pages/detail\";\r\nimport Favorite from \"../views/pages/favorite\";\r\n\r\nconst routes = {\r\n  \"/\": Home, // default page\r\n  \"/home\": Home,\r\n  \"/detail/:id\": Detail,\r\n  \"/favorite\": Favorite,\r\n};\r\n\r\nexport default routes;\r\n","const UrlParser = {\r\n  parseActiveUrlWithCombiner() {\r\n    const url = window.location.hash.slice(1).toLowerCase();\r\n    const splitedUrl = this._urlSplitter(url);\r\n    return this._urlCombiner(splitedUrl);\r\n  },\r\n\r\n  parseActiveUrlWithoutCombiner() {\r\n    const url = window.location.hash.slice(1).toLowerCase();\r\n    return this._urlSplitter(url);\r\n  },\r\n\r\n  _urlSplitter(url) {\r\n    const urlsSplits = url.split(\"/\");\r\n    return {\r\n      resource: urlsSplits[1] || null,\r\n      id: urlsSplits[2] || null,\r\n      verb: urlsSplits[3] || null,\r\n    };\r\n  },\r\n\r\n  _urlCombiner(splitedUrl) {\r\n    return (\r\n      (splitedUrl.resource ? `/${splitedUrl.resource}` : \"/\") +\r\n      (splitedUrl.id ? \"/:id\" : \"\") +\r\n      (splitedUrl.verb ? `/${splitedUrl.verb}` : \"\")\r\n    );\r\n  },\r\n};\r\n\r\nexport default UrlParser;\r\n","import { createLikeRestoButtonTemplate, createUnlikeRestoButtonTemplate } from \"../views/templates/template-creator\";\r\n\r\nconst LikeButtonPresenter = {\r\n  async init({ likeButtonContainer, favoriteResto, resto }) {\r\n    this._likeButtonContainer = likeButtonContainer;\r\n    this._resto = resto;\r\n    this._favoriteResto = favoriteResto;\r\n\r\n    await this._renderButton();\r\n  },\r\n\r\n  async _renderButton() {\r\n    const { id } = this._resto;\r\n\r\n    if (await this._isRestoExist(id)) {\r\n      this._renderLiked();\r\n    } else {\r\n      this._renderLike();\r\n    }\r\n  },\r\n\r\n  async _isRestoExist(id) {\r\n    const resto = await this._favoriteResto.getResto(id);\r\n    return !!resto;\r\n  },\r\n\r\n  _renderLike() {\r\n    this._likeButtonContainer.innerHTML = createLikeRestoButtonTemplate();\r\n\r\n    const likeButton = document.querySelector(\"#likeButton\");\r\n    likeButton.addEventListener(\"click\", async () => {\r\n      await this._favoriteResto.putResto(this._resto);\r\n      this._renderButton();\r\n    });\r\n  },\r\n\r\n  _renderLiked() {\r\n    this._likeButtonContainer.innerHTML = createUnlikeRestoButtonTemplate();\r\n\r\n    const likeButton = document.querySelector(\"#likeButton\");\r\n    likeButton.addEventListener(\"click\", async () => {\r\n      await this._favoriteResto.deleteResto(this._resto.id);\r\n      this._renderButton();\r\n    });\r\n  },\r\n};\r\n\r\nexport default LikeButtonPresenter;\r\n","const DrawerInitiator = {\r\n  init({ button, drawer, content }) {\r\n    button.addEventListener(\"click\", (event) => {\r\n      const btn = event.target.closest(\"#hamburgerButton\");\r\n      btn.classList.toggle(\"active\");\r\n      this._toggleDrawer(event, drawer);\r\n    });\r\n\r\n    content.addEventListener(\"click\", (event) => {\r\n      this._closeDrawer(event, drawer);\r\n    });\r\n  },\r\n\r\n  _toggleDrawer(event, drawer) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    drawer.classList.toggle(\"active\");\r\n  },\r\n\r\n  _closeDrawer(event, drawer) {\r\n    event.stopPropagation();\r\n    drawer.classList.remove(\"active\");\r\n  },\r\n};\r\n\r\nexport default DrawerInitiator;\r\n","import TheRestaurantSource from \"../data/therestaurant-source\";\r\nimport UrlParser from \"../routes/url-parser\";\r\n\r\nconst FormReview = {\r\n  init({ form, name, review, reviewContainer }) {\r\n    this._form = form;\r\n    this._name = name;\r\n    this._review = review;\r\n    this._reviewContainer = reviewContainer;\r\n\r\n    this.submitForm();\r\n  },\r\n\r\n  async submitForm() {\r\n    this._form.addEventListener(\"submit\", async (event) => {\r\n      event.preventDefault();\r\n      const url = UrlParser.parseActiveUrlWithoutCombiner();\r\n      const data = {\r\n        id: url.id,\r\n        name: this._name.value,\r\n        review: this._review.value,\r\n      };\r\n      const response = await TheRestaurantSource.postReview(data);\r\n      const userReview = response.customerReviews[response.customerReviews.length - 1];\r\n      this._reviewContainer.innerHTML += `\r\n         <div class=\"resto__review\">\r\n            <div class=\"resto__user\">\r\n               <img src=\"https://ui-avatars.com/api/?name=${userReview.name}\" alt=\"user\" class=\"resto__user-image\" />\r\n            </div>\r\n            <div class=\"resto__review-desc\">\r\n            <p>${userReview.name}</p>\r\n            <p class=\"resto__review-date\">${userReview.date}</p>\r\n            <p>${userReview.review}</p>\r\n            </div>\r\n         </div>`;\r\n\r\n      if (response) {\r\n        this._name.value = \"\";\r\n        this._review.value = \"\";\r\n      }\r\n    });\r\n  },\r\n};\r\n\r\nexport default FormReview;\r\n","import * as WorkboxWindow from \"workbox-window\";\r\n\r\nconst swRegister = async () => {\r\n  if (!(\"serviceWorker\" in navigator)) {\r\n    console.log(\"Service Worker not supported in the browser\");\r\n    return;\r\n  }\r\n\r\n  const wb = new WorkboxWindow.Workbox(\"/sw.bundle.js\");\r\n  try {\r\n    await wb.register();\r\n    console.log(\"Service worker registered\");\r\n  } catch (error) {\r\n    console.log(\"Failed to register service worker\", error);\r\n  }\r\n};\r\n\r\nexport default swRegister;\r\n"],"names":["Home","Detail","Favorite","routes","UrlParser","parseActiveUrlWithCombiner","url","window","location","hash","slice","toLowerCase","splitedUrl","_urlSplitter","_urlCombiner","parseActiveUrlWithoutCombiner","urlsSplits","split","resource","id","verb","createLikeRestoButtonTemplate","createUnlikeRestoButtonTemplate","LikeButtonPresenter","init","likeButtonContainer","favoriteResto","resto","_likeButtonContainer","_resto","_favoriteResto","_renderButton","_isRestoExist","_renderLiked","_renderLike","getResto","innerHTML","likeButton","document","querySelector","addEventListener","putResto","deleteResto","DrawerInitiator","button","drawer","content","event","btn","target","closest","classList","toggle","_toggleDrawer","_closeDrawer","preventDefault","stopPropagation","remove","TheRestaurantSource","FormReview","form","name","review","reviewContainer","_form","_name","_review","_reviewContainer","submitForm","data","value","postReview","response","userReview","customerReviews","length","date","WorkboxWindow","swRegister","navigator","console","log","wb","Workbox","register"],"sourceRoot":""}